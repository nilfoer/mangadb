- update func in MangaDB(not just webgui)(select fields to overwrite/update 
    always adding/updating ext_info), remove book/ext_info, limi+offset search
- webGUI: add book, search, writeinfo, fix leftmost button when small screen, display rating/my_rating, pages,
    placeholder for cover, add/change cover when editing
- safeguard against external link now linking to a different manga when updating!
- triggers for last_change incomplete replace with manual way
- webGUI: mb dont immediately load assoc col when importing from row -> webGUI displays a lot of entries and doesnt need the cols
- handle 404 error when retrieving/extracting data
- create indices for Tags.name, Category.name etc.?
- check newly added books for dl (on production db)
- test triggers
- mb add parent_id field so a chapter/volume can be attributed to a larger book
    also works rn with collection but might spam the display if there are too many chapters+books in a collection
- tests

--DONE-------------------------------------------------------------------------------------------------
- update queries for new cols/indices (except search)
- webGUI-update-book
- logging in webGUI  
- webGUI: mb add some ext info to normal display like rating on ext info when displaying thumbs or collection (if it has ext info)
- export(but i think sqlite has export to csv integrated -> only exports the table as is not joined)
- check that not null fields are set (at least when saving?)
- log adding tags or rather lists <- done
    mb also log title/id_onpage+site since id doesnt help me much when db has crashed and its prob a diff id
    -> NO, would require extra query unless i pass manga_db_entry?
- remove UNIQUE from url, since:
    url with english title for tsumino is unique: "http://www.tsumino.com/Book/Info/43150/junyou-kanmusu-ikemesu-shibari-"
        Title: Junyou Kanmusu Ikemesu Shibari
            special chars but - just get pruned or replaced by - ?:
            Fate/Gentle Order 3 「Alter」 -> http://www.tsumino.com/Book/Info/42989/fate-gentle-order-3-alter-
            HGUC# 09 Waga Uruwashiki Chichi e no ××× / HGUC#09 我が麗しき父への××× -> http://www.tsumino.com/Book/Info/42994/hguc-09-waga-uruwashiki-chichi-e-no-hguc-09-
            "Kyouei" Tokusei no Servant to / 「競泳」特性のサーヴァントと -> http://www.tsumino.com/Book/Info/43003/-kyouei-tokusei-no-servant-to-
            Boku Dake no Yuuyami | Only My Twilight Ch. 1-4, 7-9 / 僕だけの夕闇 第1-4, 7-9話 -> http://www.tsumino.com/Book/Info/36724/boku-dake-no-yuuyami-only-my-twilight-ch-1-4-7-9-1-4-7-9
            Märchen ☆ Box / メルヘン☆ぼっくす -> http://www.tsumino.com/Book/Info/42929/m-rchen-box-
            BUT CAREFUL
            url to book from index differs from url you get when hitting return when reading
            index: http://www.tsumino.com/Book/Info/42929/m-rchen-box-
            reader: http://www.tsumino.com/Book/Info/42929/marchen-box
            
            Fate/Gentle Order 3「lily」
            index: http://www.tsumino.com/Book/Info/42933/fate-gentle-order-3-lily-
            reader : http://www.tsumino.com/Book/Info/42933/fate-gentle-order-3lily
            
            Kaoru de GO! / カオルでGO!
            index: http://www.tsumino.com/Book/Info/42934/kaoru-de-go-go-
            reader : http://www.tsumino.com/Book/Info/42934/kaoru-de-go-go
    but without it it might collide with book that got the deleted and now re-used id_onpage
    and different sites dont even have the title in the url
- cant have id_onpage and imported_from as just single values if i want to support multiple sites,
    unless i always want to associate a book with an external site
    but id rather have books be independent from external sites
        -> only be able to import information from ext site
        -> and have external info (beyond basic book info: e.g. uploader, de/un/censored, downloaded etc.)
    => ExtInfo table and bridge table ExtInfoBook
- old tsumino id_onpage get reused so if i have an old book in my db whose got a new id on tsumino but the old id
    is used for a different book now -> book would get updated with data from a completely different book
    -> also think about using internal id for thumb names
    they also can get re-used, but im the one re-using them so the old cover/book-entry would already be deleted
  => use title to uniquely identify book
- on nhentai,hitomi there are several books with the same title and varying amounts of pages (from an ongoing manga/doujinshi)
    not so on tsumino
    on happypandax (manga mangager) only columns that are unique are thing you create yourself to attribute to mangas
        e.g.: language(name), artist(name), category(name) etc.
        titles, urls etc. are not
  => for now only title (and url on ext info) remains unique
- remove NOT NULL from rating, rating_full since they are not present on different manga sites (e.g. hitomi.la, nhentai.net dont have a rating system)
        SQLite uses dynamic typing i.e. the datatype of a value is associated with the value itself, not with its 
        container. It does not enforce data type constraints
        -> i can store "N/A" or sth. in rating col if i want to leave the col NOT NULL
        => decided to remove it
- convert multival cols using string_to_list etc.    
- title_foreign can be duplicate e.g. (in prod. db):
    select title_foreign, count(title_foreign) from Tsumino group by title_foreign having ( count(title_foreign) > 1 );
    
    title_foreign                           count
    "SDPO～性務官のススメ～"	                "2"
    "どんな娘もセフレにできちゃう催眠術を手に入れた!?"	"2"
    "ハイエルフ×ハイスクール"	                    "3"
    "乱れ咲き海賊女帝"	                    "3"
    
    SDPO～性務官のススメ～
    http://www.tsumino.com/Book/Info/27637/sdpo-seimukan-no-susume-sdpo
    http://www.tsumino.com/Book/Info/40349/sdpo-seimukan-no-susume-sdpo-sexual-desire-processing-officer-sdpo
    
    どんな娘もセフレにできちゃう催眠術を手に入れた!?
    http://www.tsumino.com/Book/Info/40407/donna-ko-mo-sefri-ni-dekichau-saiminjutsu-o-te-ni-ireta-saimin-shihai-kakudai-h
    http://www.tsumino.com/Book/Info/40408/donna-ko-mo-sefri-ni-dekichau-saiminjutsu-o-te-ni-ireta-i-ve-obtained-a-hypnotic-power-that-lets-me-turn-any-girl-into-a-sex-friend
    
    etc.
    => made title_foreign not unique
- change Tsumino to Books in queries
- mb replace "tsumino.com" with a nr or mb foreign key of diff table since for 2700~ entries it incread the size by 1.5MB
- some collections have a "," in their name e.g. Anyway, I Want to Have Sex With...
    => need to either escape the comma or use a different seperator
- fix booktags missing in production db:
    reason not found yet but since ive used the db recently and it crashes instanly when viewing a book using the webGUI
    its likely that it happened when i edited the DB with SQLiteDatabaseBrowser and not when using my code
    all bookid had been deleted from bridge table BookTags except for entries whoms id didnt exist in Tsumino table anymore
        get url, dled, favorite from corrupt db only when id > last addition of 2018-07-10 backup -> 2274 (first add is 2275)
            -> added-books-since-last-valid-backup_all cols_2018-09-23.csv
            -> added-books-since-last-valid-backup_url,dl,fav_2018-09-23.csv
        use log lines with:
            2018-07-10 22:37:32,145 - manga-db  - INFO   - Setting tags for "http://www.tsumino.com/Book/Info/41160/mama-sho-time-dream-express"! Previous tags were: ['li_to-read']
            2018-07-10 22:37:37,587 - manga-db  - INFO   - The following lists were selected ['li_to-read', 'li_prob-good']
        to add more than standard list (which also can be seen from previously selected part)    
        also look out for: 2018-07-10 23:43:09,664 - manga-db  - INFO   - Tried to add book with title that was already in DB: ALICE INN
            -> all additions since last valid bu with only "li_to-read"
        adding of tags not logged but
            20:12:08 - INFO - Tags set() were successfully removed from book with id "2247"
            means that tags were added or removed -> empty set removed only added tags            
--CANCELED-----------------------------------------------------------------------------------------------------------------
- mb switch to only ids when adding/removing joined col values from webGUI
    => NO since i need the names, because users are able to add new ones
        but mb switch later to add ALL the values using the names and then add them in bridge table with ids
        but prob not worth it
- change to sets for joined cols -> POSTPONED till it gets too slow
- there shouldnt be duplicate tags in the sense of e.g. "Demong Girl | Succubus" and "Succubus",
    since its impractical for searching
    -> convert site tags to MangaDB tags
    => let user handle this (they can import the tags and then change them if they dont want duplicates etc.)            